<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–†–ú–ö: –£–º–Ω–∞—è –∫–∞—Å—Å–∞</title>
    <style>
        :root {
            --primary: #6a5acd;
            --primary-light: rgba(106, 90, 205, 0.2);
            --primary-dark: #483d8b;
            --secondary: #9370db;
            --light: rgba(255, 255, 255, 0.8);
            --dark: #2f2f2f;
            --darker: #1a1a1a;
            --success: #00fa9a;
            --success-light: rgba(0, 250, 154, 0.2);
            --danger: #ff69b4;
            --danger-light: rgba(255, 105, 180, 0.2);
            --warning: #ffa500;
            --warning-light: rgba(255, 165, 0, 0.2);
            --info: #00bfff;
            --info-light: rgba(0, 191, 255, 0.2);
            --bg-gradient: linear-gradient(135deg, rgba(106, 90, 205, 0.1) 0%, rgba(147, 112, 219, 0.1) 100%);
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            --shadow-hover: 0 12px 40px rgba(0, 0, 0, 0.15);
            --radius: 16px;
            --radius-sm: 12px;
            --transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            --blur: blur(10px);
            --border-light: 1px solid rgba(255, 255, 255, 0.2);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #f5f7fa 0%, #e4e8f0 100%);
            color: var(--dark);
            line-height: 1.6;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0;
            position: relative;
        }

        .glass-panel {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: var(--blur);
            -webkit-backdrop-filter: var(--blur);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            border: var(--border-light);
            padding: 30px;
            margin-bottom: 20px;
        }

        .sale-panel {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: var(--blur);
            -webkit-backdrop-filter: var(--blur);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            border: var(--border-light);
            padding: 30px;
            margin-bottom: 20px;
        }

        h1 {
            text-align: center;
            color: var(--primary);
            margin-bottom: 30px;
            font-weight: 700;
            font-size: 2.5rem;
            position: relative;
            padding-bottom: 15px;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        h1::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 4px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            border-radius: 2px;
        }

        h2, h3, h4 {
            color: var(--primary);
            margin-bottom: 20px;
            font-weight: 600;
        }

        .tabs {
            display: flex;
            margin-bottom: 30px;
            background: rgba(255, 255, 255, 0.6);
            backdrop-filter: var(--blur);
            -webkit-backdrop-filter: var(--blur);
            border-radius: var(--radius-sm);
            padding: 5px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            border: var(--border-light);
        }

        .tab {
            padding: 14px 24px;
            cursor: pointer;
            border-radius: var(--radius-sm);
            font-weight: 500;
            transition: var(--transition);
            flex: 1;
            text-align: center;
            color: var(--dark);
            position: relative;
            overflow: hidden;
        }

        .tab.active {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            box-shadow: 0 4px 15px rgba(106, 90, 205, 0.3);
            font-weight: 600;
        }

        .tab:hover:not(.active) {
            background: rgba(106, 90, 205, 0.1);
            color: var(--primary);
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.4s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .tab-content.active {
            display: block;
        }

        .input-group {
            margin-bottom: 20px;
            display: flex;
            gap: 12px;
            align-items: center;
        }

        input, button, select {
            padding: 15px 18px;
            border: 1px solid rgba(106, 90, 205, 0.2);
            border-radius: var(--radius-sm);
            font-size: 16px;
            transition: var(--transition);
            font-family: inherit;
        }

        input {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: var(--blur);
            -webkit-backdrop-filter: var(--blur);
        }

        input:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(106, 90, 205, 0.2);
            outline: none;
            background: rgba(255, 255, 255, 0.9);
        }

        button {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            cursor: pointer;
            border: none;
            font-weight: 500;
            min-width: 140px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            box-shadow: 0 4px 15px rgba(106, 90, 205, 0.3);
            backdrop-filter: var(--blur);
            -webkit-backdrop-filter: var(--blur);
        }

        button:hover {
            background: linear-gradient(135deg, var(--primary-dark), var(--primary));
            transform: translateY(-2px);
            box-shadow: var(--shadow-hover);
        }

        button:active {
            transform: translateY(0);
        }

        button.secondary {
            background: rgba(147, 112, 219, 0.8);
        }

        button.secondary:hover {
            background: rgba(147, 112, 219, 1);
        }

        button.danger {
            background: linear-gradient(135deg, var(--danger), #ff1493);
        }

        button.danger:hover {
            background: linear-gradient(135deg, #ff1493, var(--danger));
        }

        button.warning {
            background: linear-gradient(135deg, var(--warning), #ff8c00);
        }

        button.warning:hover {
            background: linear-gradient(135deg, #ff8c00, var(--warning));
        }

        button.success {
            background: linear-gradient(135deg, var(--success), #00e676);
        }

        button.success:hover {
            background: linear-gradient(135deg, #00e676, var(--success));
        }

        button.info {
            background: linear-gradient(135deg, var(--info), #1e90ff);
        }

        button.info:hover {
            background: linear-gradient(135deg, #1e90ff, var(--info));
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: var(--blur);
            -webkit-backdrop-filter: var(--blur);
            border-radius: var(--radius);
            overflow: hidden;
            box-shadow: var(--shadow);
            border: var(--border-light);
        }

        th, td {
            padding: 16px;
            text-align: left;
            border-bottom: 1px solid rgba(106, 90, 205, 0.1);
        }

        th {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            font-weight: 500;
            text-transform: uppercase;
            font-size: 0.85rem;
            letter-spacing: 0.5px;
        }

        tr:hover {
            background: rgba(106, 90, 205, 0.05);
        }

        tr:last-child td {
            border-bottom: none;
        }

        .cart-item {
            display: flex;
            justify-content: space-between;
            padding: 16px 0;
            border-bottom: 1px dashed rgba(106, 90, 205, 0.2);
            align-items: center;
            transition: var(--transition);
        }

        .cart-item:hover {
            background: rgba(106, 90, 205, 0.03);
        }

        .total {
            font-weight: 700;
            font-size: 1.6rem;
            margin-top: 25px;
            text-align: right;
            color: var(--primary);
            padding: 20px 0;
            border-top: 2px solid var(--primary);
        }

        #barcode-input {
            font-size: 16px;
            flex: 1;
            padding: 15px 20px;
            background: rgba(255, 255, 255, 0.9);
            border: 2px solid var(--primary);
            backdrop-filter: var(--blur);
            -webkit-backdrop-filter: var(--blur);
        }

        .payment-section {
            margin-top: 30px;
            padding-top: 25px;
            border-top: 2px dashed rgba(106, 90, 205, 0.2);
        }

        .cash-info {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: var(--blur);
            -webkit-backdrop-filter: var(--blur);
            padding: 20px;
            border-radius: var(--radius);
            margin-bottom: 25px;
            box-shadow: var(--shadow);
            border: var(--border-light);
        }

        .cash-info h4 {
            margin-bottom: 15px;
            color: var(--primary-dark);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .cash-info p {
            margin-bottom: 12px;
            display: flex;
            justify-content: space-between;
        }

        .file-import-export {
            display: flex;
            gap: 12px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .badge {
            display: inline-block;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            box-shadow: 0 2px 8px rgba(106, 90, 205, 0.2);
        }

        .shift-controls {
            display: flex;
            gap: 12px;
            margin-top: 15px;
        }

        .backup-section {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 2px solid var(--primary);
        }

        .search-results {
            max-height: 300px;
            overflow-y: auto;
            border: 1px solid rgba(106, 90, 205, 0.2);
            border-radius: var(--radius-sm);
            margin-top: 5px;
            display: none;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: var(--blur);
            -webkit-backdrop-filter: var(--blur);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            position: absolute;
            width: calc(100% - 120px);
            z-index: 10;
        }

        .search-item {
            padding: 12px 16px;
            cursor: pointer;
            border-bottom: 1px solid rgba(106, 90, 205, 0.1);
            transition: var(--transition);
        }

        .search-item:hover {
            background-color: rgba(106, 90, 205, 0.05);
        }

        .search-item:last-child {
            border-bottom: none;
        }

        .shift-section {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: var(--blur);
            -webkit-backdrop-filter: var(--blur);
            padding: 25px;
            border-radius: var(--radius);
            margin-top: 40px;
            box-shadow: var(--shadow);
            border: var(--border-light);
        }

        .report-item {
            padding: 20px;
            border-bottom: 1px solid rgba(106, 90, 205, 0.1);
            cursor: pointer;
            transition: var(--transition);
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: var(--blur);
            -webkit-backdrop-filter: var(--blur);
            border-radius: var(--radius-sm);
            margin-bottom: 12px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.03);
            border: var(--border-light);
        }

        .report-item:hover {
            background-color: rgba(255, 255, 255, 0.9);
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
        }

        .withdraw-section {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px dashed rgba(106, 90, 205, 0.2);
        }

        .catalog-search {
            margin-bottom: 20px;
        }

        .search-wrapper {
            position: relative;
            flex: 1;
        }

        .highlight {
            background-color: rgba(255, 242, 172, 0.5);
            background-image: linear-gradient(to right, rgba(255, 227, 89, 0.3) 0%, rgba(255, 242, 172, 0.3) 100%);
            padding: 2px 4px;
            border-radius: 3px;
        }

        .floating-change {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: linear-gradient(135deg, var(--success), #00e676);
            color: white;
            padding: 15px 25px;
            border-radius: var(--radius);
            font-weight: 600;
            font-size: 1.2rem;
            box-shadow: 0 10px 30px rgba(0, 250, 154, 0.3);
            display: none;
            z-index: 100;
            animation: pulse 2s infinite;
            backdrop-filter: var(--blur);
            -webkit-backdrop-filter: var(--blur);
            border: var(--border-light);
        }

        .shift-status {
            font-weight: 600;
            padding: 6px 12px;
            border-radius: 20px;
            display: inline-block;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .shift-status.active {
            background: var(--success-light);
            color: var(--success);
            border: 1px solid rgba(0, 250, 154, 0.3);
        }

        .shift-status.inactive {
            background: var(--danger-light);
            color: var(--danger);
            border: 1px solid rgba(255, 105, 180, 0.3);
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(0, 250, 154, 0.7); }
            70% { box-shadow: 0 0 0 15px rgba(0, 250, 154, 0); }
            100% { box-shadow: 0 0 0 0 rgba(0, 250, 154, 0); }
        }

        /* –ê–Ω–∏–º–∞—Ü–∏–∏ */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .fade-in-up {
            animation: fadeInUp 0.5s forwards;
        }

        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
        @media (max-width: 768px) {
            .container {
                padding: 0;
            }
            
            .tabs {
                flex-wrap: wrap;
            }
            
            .tab {
                flex: 1 0 45%;
                margin-bottom: 5px;
            }
            
            .input-group {
                flex-wrap: wrap;
            }
            
            input, button {
                width: 100%;
            }
            
            .search-results {
                width: 100%;
            }
        }

        /* –ù–µ–æ–Ω–æ–≤—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã */
        .neon-text {
            text-shadow: 0 0 5px rgba(106, 90, 205, 0.3), 0 0 10px rgba(106, 90, 205, 0.2);
        }

        .neon-border {
            box-shadow: 0 0 10px rgba(106, 90, 205, 0.2), inset 0 0 10px rgba(106, 90, 205, 0.1);
        }

        .neon-card {
            box-shadow: 0 0 15px rgba(106, 90, 205, 0.2), 0 0 30px rgba(106, 90, 205, 0.1);
        }

        /* –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è */
        .save-indicator {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 10px 15px;
            border-radius: var(--radius-sm);
            font-size: 14px;
            z-index: 100;
            display: none;
            backdrop-filter: var(--blur);
            -webkit-backdrop-filter: var(--blur);
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="neon-text">–†–ú–ö: –£–º–Ω–∞—è –∫–∞—Å—Å–∞</h1>
        
        <div class="tabs neon-border">
            <div class="tab active" data-tab="sale">–ü—Ä–æ–¥–∞–∂–∏</div>
            <div class="tab" data-tab="catalog">–ö–∞—Ç–∞–ª–æ–≥</div>
            <div class="tab" data-tab="history">–ò—Å—Ç–æ—Ä–∏—è</div>
            <div class="tab" data-tab="reports">–û—Ç—á–µ—Ç—ã</div>
        </div>
        
        <!-- –í–∫–ª–∞–¥–∫–∞ "–ü—Ä–æ–¥–∞–∂–∞" -->
        <div id="sale" class="tab-content active">
            <div class="sale-panel neon-card">
                <div class="input-group">
                    <div class="search-wrapper">
                        <input type="text" id="barcode-input" placeholder="–û—Ç—Å–∫–∞–Ω–∏—Ä—É–π—Ç–µ —à—Ç—Ä–∏—Ö-–∫–æ–¥ –∏–ª–∏ –≤–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ" autofocus>
                        <div id="search-results" class="search-results"></div>
                    </div>
                </div>
                
                <div id="current-cart">
                    <h3>–¢–µ–∫—É—â–∏–π —á–µ–∫</h3>
                    <div id="cart-items"></div>
                    <div class="total">–ò—Ç–æ–≥–æ: <span id="total">0</span> ‚ÇΩ</div>
                </div>
                
                <div class="payment-section">
                    <div class="input-group">
                        <input type="number" id="cash" placeholder="–í–Ω–µ—Å—ë–Ω–Ω–∞—è —Å—É–º–º–∞" min="0">
                        <button id="complete-sale" class="success">–ü—Ä–æ–±–∏—Ç—å —á–µ–∫</button>
                    </div>
                    <div id="change-result" style="margin-top: 15px; font-weight: 600;"></div>
                </div>
            </div>
            
            <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–º–µ–Ω–æ–π -->
            <div class="shift-section neon-card">
                <h3>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–º–µ–Ω–æ–π</h3>
                <div class="input-group">
                    <input type="number" id="cash-amount" placeholder="–°—É–º–º–∞ –Ω–∞ –Ω–∞—á–∞–ª–æ —Å–º–µ–Ω—ã" min="0">
                    <div class="shift-controls">
                        <button id="start-shift" class="success">–ù–∞—á–∞—Ç—å —Å–º–µ–Ω—É</button>
                        <button id="end-shift" class="danger">–ó–∞–∫—Ä—ã—Ç—å —Å–º–µ–Ω—É</button>
                    </div>
                </div>
                
                <!-- –î–æ–±–∞–≤–ª–µ–Ω —Ä–∞–∑–¥–µ–ª –≤—ã–µ–º–∫–∏ –¥–µ–Ω–µ–≥ -->
                <div class="withdraw-section">
                    <h4>–í—ã–µ–º–∫–∞ –¥–µ–Ω–µ–∂–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤</h4>
                    <div class="input-group">
                        <input type="number" id="withdraw-amount" placeholder="–°—É–º–º–∞ –≤—ã–µ–º–∫–∏" min="0">
                        <button id="withdraw-cash" class="warning">–í—ã–≤–µ—Å—Ç–∏ –¥–µ–Ω—å–≥–∏</button>
                    </div>
                </div>
                
                <div class="cash-info">
                    <h4><i class="icon">üí∞</i> –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–∞—Å—Å—ã:</h4>
                    <p><span>–ù–∞—á–∞–ª—å–Ω–∞—è —Å—É–º–º–∞:</span> <span id="display-start-cash">0</span> ‚ÇΩ</p>
                    <p><span>–ü—Ä–æ–¥–∞–∂–∏ –∑–∞ —Å–º–µ–Ω—É:</span> <span id="display-sales-total">0</span> ‚ÇΩ</p>
                    <p><span>–í—ã–µ–º–∫–∏ –∑–∞ —Å–º–µ–Ω—É:</span> <span id="display-withdrawals">0</span> ‚ÇΩ</p>
                    <p><span>–ò—Ç–æ–≥–æ –≤ –∫–∞—Å—Å–µ:</span> <span id="display-total-cash">0</span> ‚ÇΩ</p>
                    <p><span>–°—Ç–∞—Ç—É—Å:</span> <span id="current-shift-status" class="shift-status inactive">–°–º–µ–Ω–∞ –Ω–µ –Ω–∞—á–∞—Ç–∞</span></p>
                </div>
            </div>
        </div>
        
        <!-- –í–∫–ª–∞–¥–∫–∞ "–ö–∞—Ç–∞–ª–æ–≥" -->
        <div id="catalog" class="tab-content glass-panel">
            <!-- –î–æ–±–∞–≤–ª–µ–Ω –ø–æ–∏—Å–∫ –≤ –∫–∞—Ç–∞–ª–æ–≥–µ -->
            <div class="catalog-search">
                <div class="input-group">
                    <input type="text" id="catalog-search-input" placeholder="–ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –∏–ª–∏ —à—Ç—Ä–∏—Ö-–∫–æ–¥—É">
                </div>
            </div>
            
            <h3>–î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä</h3>
            <div class="input-group">
                <input type="text" id="product-name" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ">
                <input type="text" id="product-barcode" placeholder="–®—Ç—Ä–∏—Ö-–∫–æ–¥">
                <input type="number" id="product-price" placeholder="–¶–µ–Ω–∞" min="0">
                <button id="add-product">–î–æ–±–∞–≤–∏—Ç—å</button>
            </div>
            
            <div class="file-import-export">
                <button id="export-products">–≠–∫—Å–ø–æ—Ä—Ç –∫–∞—Ç–∞–ª–æ–≥–∞</button>
                <button id="import-products" class="secondary">–ò–º–ø–æ—Ä—Ç –∫–∞—Ç–∞–ª–æ–≥–∞</button>
                <input type="file" id="products-file" accept=".json" style="display: none;">
            </div>
            
            <h3>–°–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤</h3>
            <table id="products-table">
                <thead>
                    <tr>
                        <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                        <th>–®—Ç—Ä–∏—Ö-–∫–æ–¥</th>
                        <th>–¶–µ–Ω–∞ (‚ÇΩ)</th>
                        <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                    </tr>
                </thead>
                <tbody id="products-list"></tbody>
            </table>
        </div>
        
        <!-- –í–∫–ª–∞–¥–∫–∞ "–ò—Å—Ç–æ—Ä–∏—è" -->
        <div id="history" class="tab-content glass-panel">
            <div class="file-import-export">
                <button id="export-receipts">–≠–∫—Å–ø–æ—Ä—Ç –∏—Å—Ç–æ—Ä–∏–∏</button>
                <button id="import-receipts" class="secondary">–ò–º–ø–æ—Ä—Ç –∏—Å—Ç–æ—Ä–∏–∏</button>
                <input type="file" id="receipts-file" accept=".json" style="display: none;">
            </div>
            
            <h3>–ò—Å—Ç–æ—Ä–∏—è –ø—Ä–æ–¥–∞–∂</h3>
            <div class="input-group">
                <input type="date" id="history-date">
                <button id="show-history">–ü–æ–∫–∞–∑–∞—Ç—å</button>
            </div>
            <table id="history-table">
                <thead>
                    <tr>
                        <th>–î–∞—Ç–∞</th>
                        <th>–ß–µ–∫–æ–≤</th>
                        <th>–°—É–º–º–∞</th>
                        <th>–í—ã–µ–º–∫–∏</th>
                        <th>–î–µ—Ç–∞–ª–∏</th>
                    </tr>
                </thead>
                <tbody id="history-list"></tbody>
            </table>
        </div>
        
        <!-- –í–∫–ª–∞–¥–∫–∞ "–û—Ç—á–µ—Ç—ã" -->
        <div id="reports" class="tab-content glass-panel">
            <h3>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ç—á–µ—Ç–∞–º–∏</h3>
            <div class="file-import-export">
                <button id="load-report" class="secondary">–ó–∞–≥—Ä—É–∑–∏—Ç—å –æ—Ç—á–µ—Ç</button>
                <input type="file" id="report-file" accept=".json" style="display: none;">
            </div>
            
            <h3>–°–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –æ—Ç—á–µ—Ç—ã</h3>
            <div id="reports-list" style="margin-top: 15px;">
                <!-- –ó–¥–µ—Å—å –±—É–¥—É—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ –æ—Ç—á–µ—Ç—ã -->
            </div>
        </div>
    </div>

    <!-- –ü–ª–∞–≤–∞—é—â–∏–π –±–ª–æ–∫ —Å–¥–∞—á–∏ -->
    <div id="floating-change" class="floating-change"></div>

    <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è -->
    <div id="save-indicator" class="save-indicator">–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ...</div>

    <script>
        // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è - –∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ URL –≤–∞—à–µ–≥–æ Google Apps Script
        const GOOGLE_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbyOydtbamv0wM-SExgd7muReZZ9q5CzlE5OIYAC7HFKJUf8AwAjzN7fiZGdNfKmaEhP/exec';
        
        // –î–∞–Ω–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        let products = [];
        let receipts = [];
        let currentCart = [];
        let cashRegister = {
            startAmount: 0,
            salesTotal: 0,
            withdrawals: 0,
            isShiftActive: false,
            endAmount: null
        };
        let reports = [];
        let withdrawalsHistory = [];
        
        // DOM-—ç–ª–µ–º–µ–Ω—Ç—ã
        const tabContents = document.querySelectorAll('.tab-content');
        const tabs = document.querySelectorAll('.tab');
        const barcodeInput = document.getElementById('barcode-input');
        const searchResultsEl = document.getElementById('search-results');
        const cartItemsEl = document.getElementById('cart-items');
        const totalEl = document.getElementById('total');
        const cashInput = document.getElementById('cash');
        const completeSaleBtn = document.getElementById('complete-sale');
        const changeResultEl = document.getElementById('change-result');
        const floatingChangeEl = document.getElementById('floating-change');
        const productNameInput = document.getElementById('product-name');
        const productBarcodeInput = document.getElementById('product-barcode');
        const productPriceInput = document.getElementById('product-price');
        const addProductBtn = document.getElementById('add-product');
        const productsListEl = document.getElementById('products-list');
        const historyDateInput = document.getElementById('history-date');
        const showHistoryBtn = document.getElementById('show-history');
        const historyListEl = document.getElementById('history-list');
        const cashAmountInput = document.getElementById('cash-amount');
        const startShiftBtn = document.getElementById('start-shift');
        const endShiftBtn = document.getElementById('end-shift');
        const withdrawAmountInput = document.getElementById('withdraw-amount');
        const withdrawCashBtn = document.getElementById('withdraw-cash');
        const currentShiftStatusEl = document.getElementById('current-shift-status');
        const displayStartCashEl = document.getElementById('display-start-cash');
        const displaySalesTotalEl = document.getElementById('display-sales-total');
        const displayWithdrawalsEl = document.getElementById('display-withdrawals');
        const displayTotalCashEl = document.getElementById('display-total-cash');
        const exportProductsBtn = document.getElementById('export-products');
        const importProductsBtn = document.getElementById('import-products');
        const productsFileInput = document.getElementById('products-file');
        const exportReceiptsBtn = document.getElementById('export-receipts');
        const importReceiptsBtn = document.getElementById('import-receipts');
        const receiptsFileInput = document.getElementById('receipts-file');
        const loadReportBtn = document.getElementById('load-report');
        const reportFileInput = document.getElementById('report-file');
        const reportsListEl = document.getElementById('reports-list');
        const catalogSearchInput = document.getElementById('catalog-search-input');
        const saveIndicator = document.getElementById('save-indicator');

        // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Google –¢–∞–±–ª–∏—Ü–∞–º–∏
        async function saveData(dataType, data) {
            try {
                showSaveIndicator(`–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ ${dataType}...`);
                
                const response = await fetch(GOOGLE_SCRIPT_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ 
                        action: `save${dataType}`,
                        [dataType.toLowerCase()]: data 
                    })
                });
                
                const result = await response.text();
                showSaveIndicator(`${dataType} —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã`, true);
                return result;
            } catch (error) {
                console.error(`–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è ${dataType}:`, error);
                showSaveIndicator(`–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è ${dataType}`, false);
                return null;
            }
        }

        async function loadAllData() {
            try {
                showSaveIndicator('–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö...');
                const response = await fetch(`${GOOGLE_SCRIPT_URL}?action=loadData`);
                const data = await response.json();
                
                products = data.products || [];
                receipts = data.receipts || [];
                withdrawalsHistory = data.withdrawals || [];
                cashRegister = data.cashRegister || {
                    startAmount: 0,
                    salesTotal: 0,
                    withdrawals: 0,
                    isShiftActive: false,
                    endAmount: null
                };
                reports = data.reports || [];
                
                showSaveIndicator('–î–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã', true);
                return data;
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö:', error);
                showSaveIndicator('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö', false);
                return null;
            }
        }

        function showSaveIndicator(message, isSuccess = false) {
            saveIndicator.textContent = message;
            saveIndicator.style.display = 'block';
            saveIndicator.style.backgroundColor = isSuccess ? 'rgba(0, 200, 0, 0.7)' : 'rgba(0, 0, 0, 0.7)';
            
            if (isSuccess) {
                setTimeout(() => {
                    saveIndicator.style.display = 'none';
                }, 2000);
            }
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        document.addEventListener('DOMContentLoaded', async () => {
            await loadAllData();
            
            renderProducts();
            renderHistory();
            renderReports();
            updateCashDisplay();
            historyDateInput.valueAsDate = new Date();
            barcodeInput.focus();
            
            // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —à—Ç—Ä–∏—Ö-–∫–æ–¥–∞
            barcodeInput.addEventListener('keydown', (e) => {
                if (e.key === 'Enter') {
                    addProductToCart();
                }
            });

            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç —Å–¥–∞—á–∏ –ø—Ä–∏ –≤–≤–æ–¥–µ —Å—É–º–º—ã
            cashInput.addEventListener('input', calculateChange);

            // –ù–∞–∑–Ω–∞—á–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
            setupEventListeners();
        });
        
        // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π
        function setupEventListeners() {
            // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∫–ª–∞–¥–æ–∫
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    tabs.forEach(t => t.classList.remove('active'));
                    tabContents.forEach(c => c.classList.remove('active'));
                    tab.classList.add('active');
                    document.getElementById(tab.dataset.tab).classList.add('active');
                    if (tab.dataset.tab === 'sale') barcodeInput.focus();
                });
            });

            // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞
            addProductBtn.addEventListener('click', addNewProduct);

            // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Å—Å–æ–π
            startShiftBtn.addEventListener('click', startShift);
            endShiftBtn.addEventListener('click', endShift);
            withdrawCashBtn.addEventListener('click', withdrawCash);

            // –ü—Ä–æ–¥–∞–∂–∏
            completeSaleBtn.addEventListener('click', completeSale);
            barcodeInput.addEventListener('input', searchProducts);

            // –ü–æ–∏—Å–∫ –≤ –∫–∞—Ç–∞–ª–æ–≥–µ
            catalogSearchInput.addEventListener('input', searchInCatalog);

            // –ò–º–ø–æ—Ä—Ç/—ç–∫—Å–ø–æ—Ä—Ç
            exportProductsBtn.addEventListener('click', exportProducts);
            importProductsBtn.addEventListener('click', () => productsFileInput.click());
            productsFileInput.addEventListener('change', importProducts);

            exportReceiptsBtn.addEventListener('click', exportReceipts);
            importReceiptsBtn.addEventListener('click', () => receiptsFileInput.click());
            receiptsFileInput.addEventListener('change', importReceipts);

            // –û—Ç—á–µ—Ç—ã
            loadReportBtn.addEventListener('click', () => reportFileInput.click());
            reportFileInput.addEventListener('change', importReport);

            // –ò—Å—Ç–æ—Ä–∏—è
            showHistoryBtn.addEventListener('click', renderHistory);
        }

        // –ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤
        function searchProducts() {
            const searchTerm = barcodeInput.value.trim().toLowerCase();
            if (searchTerm.length < 1) {
                searchResultsEl.style.display = 'none';
                return;
            }

            const results = products.filter(product => 
                product.name.toLowerCase().includes(searchTerm) || 
                product.barcode.includes(searchTerm)
            );

            displaySearchResults(results);
        }

        function displaySearchResults(results) {
            searchResultsEl.innerHTML = '';
            
            if (results.length === 0) {
                searchResultsEl.style.display = 'none';
                return;
            }

            results.forEach(product => {
                const div = document.createElement('div');
                div.className = 'search-item';
                div.innerHTML = `${product.name} (${product.price} ‚ÇΩ) <span class="badge">${product.barcode}</span>`;
                div.addEventListener('click', () => {
                    addProductToCart(product.barcode);
                    searchResultsEl.style.display = 'none';
                });
                searchResultsEl.appendChild(div);
            });

            searchResultsEl.style.display = 'block';
        }

        // –ü–æ–∏—Å–∫ –≤ –∫–∞—Ç–∞–ª–æ–≥–µ
        function searchInCatalog() {
            const searchTerm = catalogSearchInput.value.trim().toLowerCase();
            if (!searchTerm) {
                renderProducts();
                return;
            }

            const filteredProducts = products.filter(product => 
                product.name.toLowerCase().includes(searchTerm) || 
                product.barcode.toLowerCase().includes(searchTerm)
            );

            renderProducts(filteredProducts);
        }

        // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ç–æ–≤–∞—Ä–∞
        async function addNewProduct() {
            const name = productNameInput.value.trim();
            const barcode = productBarcodeInput.value.trim();
            const price = parseInt(productPriceInput.value) || 0;
            
            if (!name || !barcode || price <= 0) {
                alert('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ!');
                return;
            }
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –¥—É–±–ª–∏–∫–∞—Ç —à—Ç—Ä–∏—Ö-–∫–æ–¥–∞
            if (products.some(p => p.barcode === barcode)) {
                alert('–¢–æ–≤–∞—Ä —Å —Ç–∞–∫–∏–º —à—Ç—Ä–∏—Ö-–∫–æ–¥–æ–º —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç!');
                return;
            }
            
            products.push({ name, barcode, price });
            await saveData('Products', products);
            
            productNameInput.value = '';
            productBarcodeInput.value = '';
            productPriceInput.value = '';
            renderProducts();
            catalogSearchInput.value = '';
        }

        // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–º–µ–Ω–æ–π
        async function startShift() {
            const amount = parseInt(cashAmountInput.value) || 0;
            if (amount <= 0) {
                alert('–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é —Å—É–º–º—É!');
                return;
            }
            
            cashRegister = {
                startAmount: amount,
                salesTotal: 0,
                withdrawals: 0,
                isShiftActive: true,
                endAmount: null
            };
            
            await saveData('CashRegister', cashRegister);
            updateCashDisplay();
            cashAmountInput.value = '';
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç—É—Å —Å–º–µ–Ω—ã
            currentShiftStatusEl.textContent = '–°–º–µ–Ω–∞ –∞–∫—Ç–∏–≤–Ω–∞';
            currentShiftStatusEl.className = 'shift-status active';
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
            showNotification(`–°–º–µ–Ω–∞ –Ω–∞—á–∞—Ç–∞! –ù–∞—á–∞–ª—å–Ω–∞—è —Å—É–º–º–∞: ${amount} ‚ÇΩ`, 'success');
        }

        async function endShift() {
            if (!cashRegister.isShiftActive) {
                alert('–°–º–µ–Ω–∞ —É–∂–µ –∑–∞–∫—Ä—ã—Ç–∞!');
                return;
            }
            
            const endAmount = cashRegister.startAmount + cashRegister.salesTotal - cashRegister.withdrawals;
            cashRegister.isShiftActive = false;
            cashRegister.endAmount = endAmount;
            
            // –°–æ–∑–¥–∞–µ–º –æ—Ç—á–µ—Ç –æ —Å–º–µ–Ω–µ
            const now = new Date();
            const report = {
                date: now.toISOString().split('T')[0],
                time: now.toLocaleTimeString(),
                startAmount: cashRegister.startAmount,
                salesTotal: cashRegister.salesTotal,
                withdrawals: cashRegister.withdrawals,
                endAmount: endAmount,
                receipts: receipts.filter(r => r.date === now.toISOString().split('T')[0]),
                withdrawalsHistory: withdrawalsHistory.filter(w => w.date === now.toISOString().split('T')[0])
            };
            
            // –î–æ–±–∞–≤–ª—è–µ–º –æ—Ç—á–µ—Ç –≤ —Å–ø–∏—Å–æ–∫
            reports.push(report);
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤—Å–µ –¥–∞–Ω–Ω—ã–µ
            await Promise.all([
                saveData('CashRegister', cashRegister),
                saveData('Reports', reports)
            ]);
            
            // –û–±–Ω—É–ª—è–µ–º —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
            cashRegister = {
                startAmount: 0,
                salesTotal: 0,
                withdrawals: 0,
                isShiftActive: false,
                endAmount: null
            };
            
            await saveData('CashRegister', cashRegister);
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç—É—Å —Å–º–µ–Ω—ã
            currentShiftStatusEl.textContent = '–°–º–µ–Ω–∞ –Ω–µ –Ω–∞—á–∞—Ç–∞';
            currentShiftStatusEl.className = 'shift-status inactive';
            
            updateCashDisplay();
            renderReports();
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
            showNotification(`–°–º–µ–Ω–∞ –∑–∞–∫—Ä—ã—Ç–∞! –ò—Ç–æ–≥–æ–≤–∞—è —Å—É–º–º–∞: ${endAmount} ‚ÇΩ. –û—Ç—á–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω.`, 'success');
        }

        // –í—ã–µ–º–∫–∞ –¥–µ–Ω–µ–∂–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤
        async function withdrawCash() {
            if (!cashRegister.isShiftActive) {
                alert('–°–º–µ–Ω–∞ –Ω–µ –Ω–∞—á–∞—Ç–∞!');
                return;
            }
            
            const amount = parseInt(withdrawAmountInput.value) || 0;
            if (amount <= 0) {
                alert('–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é —Å—É–º–º—É!');
                return;
            }
            
            const totalCash = cashRegister.startAmount + cashRegister.salesTotal - cashRegister.withdrawals;
            if (amount > totalCash) {
                alert('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤ –≤ –∫–∞—Å—Å–µ!');
                return;
            }
            
            cashRegister.withdrawals += amount;
            
            // –î–æ–±–∞–≤–ª—è–µ–º –∑–∞–ø–∏—Å—å –≤ –∏—Å—Ç–æ—Ä–∏—é –≤—ã–µ–º–æ–∫
            const now = new Date();
            withdrawalsHistory.push({
                date: now.toISOString().split('T')[0],
                time: now.toLocaleTimeString(),
                amount: amount,
                comment: '–í—ã–µ–º–∫–∞ —Å—Ä–µ–¥—Å—Ç–≤'
            });
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è
            await Promise.all([
                saveData('CashRegister', cashRegister),
                saveData('Withdrawals', withdrawalsHistory)
            ]);
            
            updateCashDisplay();
            withdrawAmountInput.value = '';
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
            showNotification(`–í—ã–≤–µ–¥–µ–Ω–æ ${amount} ‚ÇΩ –∏–∑ –∫–∞—Å—Å—ã`, 'warning');
        }

        // –ü—Ä–æ–¥–∞–∂–∏
        function addProductToCart(barcode = null) {
            const searchTerm = barcode || barcodeInput.value.trim();
            if (!searchTerm) return;
            
            const product = products.find(p => 
                p.barcode === searchTerm || 
                p.name.toLowerCase().includes(searchTerm.toLowerCase())
            );
            
            if (product) {
                currentCart.push({
                    name: product.name,
                    price: product.price,
                    barcode: product.barcode
                });
                renderCart();
                barcodeInput.value = '';
                barcodeInput.focus();
                searchResultsEl.style.display = 'none';
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
                showNotification(`–î–æ–±–∞–≤–ª–µ–Ω: ${product.name}`, 'success');
            } else {
                alert('–¢–æ–≤–∞—Ä –Ω–µ –Ω–∞–π–¥–µ–Ω! –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —à—Ç—Ä–∏—Ö-–∫–æ–¥ –∏–ª–∏ –Ω–∞–∑–≤–∞–Ω–∏–µ.');
                barcodeInput.select();
            }
        }

        function calculateChange() {
            const total = parseInt(totalEl.textContent) || 0;
            const cash = parseInt(cashInput.value) || 0;
            
            if (cash === 0) {
                changeResultEl.textContent = '';
                floatingChangeEl.style.display = 'none';
                return;
            }
            
            if (cash < total) {
                changeResultEl.textContent = '–û—à–∏–±–∫–∞: –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–µ–Ω–µ–≥!';
                changeResultEl.style.color = 'var(--danger)';
                floatingChangeEl.style.display = 'none';
            } else {
                const change = cash - total;
                changeResultEl.textContent = `–°–¥–∞—á–∞: ${change} ‚ÇΩ`;
                changeResultEl.style.color = 'var(--success)';
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–ª–∞–≤–∞—é—â–∏–π –±–ª–æ–∫ —Å–¥–∞—á–∏
                floatingChangeEl.textContent = `–°–¥–∞—á–∞: ${change} ‚ÇΩ`;
                floatingChangeEl.style.display = 'flex';
            }
        }

        async function completeSale() {
            if (!cashRegister.isShiftActive) {
                alert('–°–º–µ–Ω–∞ –Ω–µ –Ω–∞—á–∞—Ç–∞! –û—Ç–∫—Ä–æ–π—Ç–µ —Å–º–µ–Ω—É –≤ –±–ª–æ–∫–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è.');
                return;
            }
            
            const total = parseInt(totalEl.textContent) || 0;
            if (total === 0) {
                alert('–ß–µ–∫ –ø—É—Å—Ç!');
                return;
            }
            
            const cash = parseInt(cashInput.value) || 0;
            if (cash < total) {
                alert('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–µ–Ω–µ–≥!');
                return;
            }
            
            const now = new Date();
            const receipt = {
                date: now.toISOString().split('T')[0],
                time: now.toLocaleTimeString(),
                items: [...currentCart],
                total: total,
                cashReceived: cash,
                change: cash - total
            };
            
            receipts.push(receipt);
            cashRegister.salesTotal += total;
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è
            await Promise.all([
                saveData('Receipts', receipts),
                saveData('CashRegister', cashRegister)
            ]);
            
            currentCart = [];
            renderCart();
            cashInput.value = '';
            changeResultEl.textContent = '';
            floatingChangeEl.style.display = 'none';
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
            showNotification(`–ß–µ–∫ –ø—Ä–æ–±–∏—Ç! –°—É–º–º–∞: ${total} ‚ÇΩ`, 'success');
            
            renderHistory();
            barcodeInput.focus();
        }

        // –ò–º–ø–æ—Ä—Ç/—ç–∫—Å–ø–æ—Ä—Ç
        async function exportProducts() {
            const data = JSON.stringify(products, null, 2);
            downloadFile(data, 'products.json', 'application/json');
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
            showNotification('–ö–∞—Ç–∞–ª–æ–≥ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω!', 'success');
        }

        async function importProducts(e) {
            const file = e.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = async (event) => {
                try {
                    const importedProducts = JSON.parse(event.target.result);
                    if (Array.isArray(importedProducts)) {
                        products = importedProducts;
                        await saveData('Products', products);
                        renderProducts();
                        
                        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
                        showNotification('–ö–∞—Ç–∞–ª–æ–≥ —É—Å–ø–µ—à–Ω–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω!', 'success');
                    } else {
                        alert('–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–∞! –û–∂–∏–¥–∞–µ—Ç—Å—è –º–∞—Å—Å–∏–≤ —Ç–æ–≤–∞—Ä–æ–≤.');
                    }
                } catch (error) {
                    alert('–û—à–∏–±–∫–∞ –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏ —Ñ–∞–π–ª–∞!');
                }
                e.target.value = '';
            };
            reader.readAsText(file);
        }

        async function exportReceipts() {
            const data = JSON.stringify(receipts, null, 2);
            downloadFile(data, 'receipts.json', 'application/json');
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
            showNotification('–ò—Å—Ç–æ—Ä–∏—è –ø—Ä–æ–¥–∞–∂ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–∞!', 'success');
        }

        async function importReceipts(e) {
            const file = e.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = async (event) => {
                try {
                    const importedReceipts = JSON.parse(event.target.result);
                    if (Array.isArray(importedReceipts)) {
                        receipts = importedReceipts;
                        await saveData('Receipts', receipts);
                        renderHistory();
                        
                        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
                        showNotification('–ò—Å—Ç–æ—Ä–∏—è —É—Å–ø–µ—à–Ω–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–∞!', 'success');
                    } else {
                        alert('–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–∞! –û–∂–∏–¥–∞–µ—Ç—Å—è –º–∞—Å—Å–∏–≤ —á–µ–∫–æ–≤.');
                    }
                } catch (error) {
                    alert('–û—à–∏–±–∫–∞ –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏ —Ñ–∞–π–ª–∞!');
                }
                e.target.value = '';
            };
            reader.readAsText(file);
        }

        // –†–∞–±–æ—Ç–∞ —Å –æ—Ç—á–µ—Ç–∞–º–∏
        async function importReport(e) {
            const file = e.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = async (event) => {
                try {
                    const report = JSON.parse(event.target.result);
                    reports.push(report);
                    await saveData('Reports', reports);
                    renderReports();
                    
                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
                    showNotification('–û—Ç—á–µ—Ç —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω!', 'success');
                } catch (error) {
                    alert('–û—à–∏–±–∫–∞ –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏ —Ñ–∞–π–ª–∞ –æ—Ç—á–µ—Ç–∞!');
                }
                e.target.value = '';
            };
            reader.readAsText(file);
        }

        function renderReports() {
            reportsListEl.innerHTML = '';
            
            if (reports.length === 0) {
                reportsListEl.innerHTML = '<div style="padding: 15px; text-align: center; color: var(--gray);">–ù–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –æ—Ç—á–µ—Ç–æ–≤</div>';
                return;
            }
            
            reports.forEach((report, index) => {
                const div = document.createElement('div');
                div.className = 'report-item fade-in-up';
                div.innerHTML = `
                    <div><strong>–û—Ç—á–µ—Ç –∑–∞ ${report.date}</strong></div>
                    <div style="display: flex; justify-content: space-between; margin-top: 10px;">
                        <div>
                            <div>–ù–∞—á–∞–ª—å–Ω–∞—è —Å—É–º–º–∞: <strong>${report.startAmount} ‚ÇΩ</strong></div>
                            <div>–ü—Ä–æ–¥–∞–∂–∏: <strong>${report.salesTotal} ‚ÇΩ</strong></div>
                        </div>
                        <div>
                            <div>–í—ã–µ–º–∫–∏: <strong>${report.withdrawals || 0} ‚ÇΩ</strong></div>
                            <div>–ò—Ç–æ–≥–æ–≤–∞—è —Å—É–º–º–∞: <strong>${report.endAmount} ‚ÇΩ</strong></div>
                        </div>
                    </div>
                    <button onclick="viewReportDetails(${index})" style="margin-top: 10px; width: 100%;">–ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å</button>
                `;
                reportsListEl.appendChild(div);
            });
        }

        // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
        function renderProducts(productsToRender = products) {
            productsListEl.innerHTML = '';
            
            if (productsToRender.length === 0) {
                productsListEl.innerHTML = '<tr><td colspan="4" style="text-align: center; padding: 20px; color: var(--gray);">–¢–æ–≤–∞—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</td></tr>';
                return;
            }
            
            productsToRender.forEach((product, index) => {
                const tr = document.createElement('tr');
                tr.className = 'fade-in-up';
                tr.innerHTML = `
                    <td>${highlightSearchTerm(product.name)}</td>
                    <td><span class="badge">${product.barcode}</span></td>
                    <td>${product.price} ‚ÇΩ</td>
                    <td>
                        <button onclick="deleteProduct(${index})" class="danger">–£–¥–∞–ª–∏—Ç—å</button>
                    </td>
                `;
                productsListEl.appendChild(tr);
            });
        }

        function highlightSearchTerm(text) {
            const searchTerm = catalogSearchInput.value.trim();
            if (!searchTerm) return text;
            
            const regex = new RegExp(`(${searchTerm})`, 'gi');
            return text.replace(regex, '<span class="highlight">$1</span>');
        }

        function renderCart() {
            cartItemsEl.innerHTML = '';
            let total = 0;
            
            if (currentCart.length === 0) {
                cartItemsEl.innerHTML = '<div style="padding: 20px; text-align: center; color: var(--gray);">–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</div>';
                totalEl.textContent = '0';
                return;
            }
            
            currentCart.forEach((item, index) => {
                const div = document.createElement('div');
                div.className = 'cart-item fade-in-up';
                div.innerHTML = `
                    <span>${item.name} (${item.price} ‚ÇΩ)</span>
                    <button onclick="removeFromCart(${index})" class="danger">√ó</button>
                `;
                cartItemsEl.appendChild(div);
                total += item.price;
            });
            
            totalEl.textContent = total;
        }

        function renderHistory() {
            const date = historyDateInput.value;
            const groupedByDate = {};
            
            // –ì—Ä—É–ø–ø–∏—Ä—É–µ–º —á–µ–∫–∏ –ø–æ –¥–∞—Ç–µ
            receipts.forEach(receipt => {
                if (!groupedByDate[receipt.date]) {
                    groupedByDate[receipt.date] = {
                        count: 0,
                        total: 0,
                        receipts: []
                    };
                }
                groupedByDate[receipt.date].count++;
                groupedByDate[receipt.date].total += receipt.total;
                groupedByDate[receipt.date].receipts.push(receipt);
            });
            
            // –ì—Ä—É–ø–ø–∏—Ä—É–µ–º –≤—ã–µ–º–∫–∏ –ø–æ –¥–∞—Ç–µ
            const withdrawalsByDate = {};
            withdrawalsHistory.forEach(withdrawal => {
                if (!withdrawalsByDate[withdrawal.date]) {
                    withdrawalsByDate[withdrawal.date] = 0;
                }
                withdrawalsByDate[withdrawal.date] += withdrawal.amount;
            });
            
            historyListEl.innerHTML = '';
            
            if (Object.keys(groupedByDate).length === 0) {
                historyListEl.innerHTML = '<tr><td colspan="5" style="text-align: center; padding: 20px; color: var(--gray);">–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –ø—Ä–æ–¥–∞–∂–∞—Ö</td></tr>';
                return;
            }
            
            Object.entries(groupedByDate).forEach(([date, data]) => {
                const tr = document.createElement('tr');
                tr.className = 'fade-in-up';
                tr.innerHTML = `
                    <td>${date}</td>
                    <td>${data.count}</td>
                    <td>${data.total} ‚ÇΩ</td>
                    <td>${withdrawalsByDate[date] || 0} ‚ÇΩ</td>
                    <td><button onclick="showReceiptsDetails('${date}')">–ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏</button></td>
                `;
                historyListEl.appendChild(tr);
            });
        }

        function updateCashDisplay() {
            const totalCash = cashRegister.startAmount + cashRegister.salesTotal - cashRegister.withdrawals;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç—É—Å —Å–º–µ–Ω—ã
            if (cashRegister.isShiftActive) {
                currentShiftStatusEl.textContent = '–°–º–µ–Ω–∞ –∞–∫—Ç–∏–≤–Ω–∞';
                currentShiftStatusEl.className = 'shift-status active';
            } else {
                currentShiftStatusEl.textContent = '–°–º–µ–Ω–∞ –Ω–µ –Ω–∞—á–∞—Ç–∞';
                currentShiftStatusEl.className = 'shift-status inactive';
            }
            
            displayStartCashEl.textContent = cashRegister.startAmount;
            displaySalesTotalEl.textContent = cashRegister.salesTotal;
            displayWithdrawalsEl.textContent = cashRegister.withdrawals;
            displayTotalCashEl.textContent = totalCash;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–Ω–æ–ø–æ–∫
            startShiftBtn.disabled = cashRegister.isShiftActive;
            endShiftBtn.disabled = !cashRegister.isShiftActive;
            withdrawCashBtn.disabled = !cashRegister.isShiftActive;
        }

        // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
        function downloadFile(data, filename, type) {
            const blob = new Blob([data], { type });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            setTimeout(() => {
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            }, 100);
        }

        function showNotification(message, type = 'success') {
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.textContent = message;
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 15px 25px;
                background: ${type === 'success' ? 'linear-gradient(135deg, var(--success), #00e676)' : 
                             type === 'warning' ? 'linear-gradient(135deg, var(--warning), #ff8c00)' : 
                             'linear-gradient(135deg, var(--danger), #ff1493)'};
                color: white;
                border-radius: var(--radius-sm);
                box-shadow: var(--shadow);
                z-index: 1000;
                animation: fadeInUp 0.5s;
                backdrop-filter: var(--blur);
                -webkit-backdrop-filter: var(--blur);
                border: var(--border-light);
            `;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'fadeOut 0.5s forwards';
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 500);
            }, 3000);
        }

        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
        window.removeFromCart = (index) => {
            currentCart.splice(index, 1);
            renderCart();
        };

        window.deleteProduct = async (index) => {
            if (confirm('–£–¥–∞–ª–∏—Ç—å —Ç–æ–≤–∞—Ä?')) {
                products.splice(index, 1);
                await saveData('Products', products);
                renderProducts();
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
                showNotification('–¢–æ–≤–∞—Ä —É–¥–∞–ª–µ–Ω!', 'danger');
            }
        };

        window.showReceiptsDetails = (date) => {
            const dailyReceipts = receipts.filter(r => r.date === date);
            const dailyWithdrawals = withdrawalsHistory.filter(w => w.date === date);
            
            let details = `–î–µ—Ç–∞–ª–∏ –∑–∞ ${date}:\n\n`;
            details += `=== –ü—Ä–æ–¥–∞–∂–∏ ===\n`;
            details += `–í—Å–µ–≥–æ —á–µ–∫–æ–≤: ${dailyReceipts.length}\n`;
            details += `–û–±—â–∞—è —Å—É–º–º–∞: ${dailyReceipts.reduce((sum, r) => sum + r.total, 0)} ‚ÇΩ\n\n`;
            
            dailyReceipts.forEach((r, i) => {
                details += `–ß–µ–∫ #${i + 1} (${r.time}): ${r.total} ‚ÇΩ\n`;
                r.items.forEach(item => {
                    details += `- ${item.name}: ${item.price} ‚ÇΩ\n`;
                });
                details += '\n';
            });
            
            if (dailyWithdrawals.length > 0) {
                details += `=== –í—ã–µ–º–∫–∏ ===\n`;
                details += `–í—Å–µ–≥–æ –≤—ã–µ–º–æ–∫: ${dailyWithdrawals.length}\n`;
                details += `–û–±—â–∞—è —Å—É–º–º–∞: ${dailyWithdrawals.reduce((sum, w) => sum + w.amount, 0)} ‚ÇΩ\n\n`;
                
                dailyWithdrawals.forEach((w, i) => {
                    details += `–í—ã–µ–º–∫–∞ #${i + 1} (${w.time}): ${w.amount} ‚ÇΩ\n`;
                });
            }
            
            alert(details);
        };

        window.viewReportDetails = (index) => {
            const report = reports[index];
            let details = `–û—Ç—á–µ—Ç –∑–∞ ${report.date}\n\n`;
            details += `–ù–∞—á–∞–ª—å–Ω–∞—è —Å—É–º–º–∞: ${report.startAmount} ‚ÇΩ\n`;
            details += `–ü—Ä–æ–¥–∞–∂–∏ –∑–∞ —Å–º–µ–Ω—É: ${report.salesTotal} ‚ÇΩ\n`;
            details += `–í—ã–µ–º–∫–∏ –∑–∞ —Å–º–µ–Ω—É: ${report.withdrawals || 0} ‚ÇΩ\n`;
            details += `–ò—Ç–æ–≥–æ–≤–∞—è —Å—É–º–º–∞: ${report.endAmount} ‚ÇΩ\n\n`;
            details += `–ß–µ–∫–æ–≤ –∑–∞ —Å–º–µ–Ω—É: ${report.receipts.length}\n`;
            details += `–í—ã–µ–º–æ–∫ –∑–∞ —Å–º–µ–Ω—É: ${report.withdrawalsHistory?.length || 0}\n`;
            
            alert(details);
        };
    </script>
</body>
</html>